apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: frigate
  namespace: frigate
spec:
  interval: 10m
  chart:
    spec:
      chart: frigate
      version: '7.8.0'
      sourceRef:
        kind: HelmRepository
        name: frigate
        namespace: frigate
      interval: 10m
  values:

    ingress:
      enabled: true
      hosts:
        - host: frigate.mkped.com
          paths:
            - path: '/'
              portName: http-auth
    tls:
      - secretName: frigate-certificate-secret
        hosts:
          - frigate.mkped.com

    config: |
      mqtt:
        enabled: false

      cameras:
        carport:
          enabled: true
          ffmpeg:
            inputs:
              - path: rtsp://root:2mNxviUytTynqHubFFRc@192.168.1.187/axis-media/media.amp?streamprofile=MaxProfile
                roles:
                  - detect